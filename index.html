<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>é›™åŸå†¬å­£ä¹‹æ—…</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap');
        body { font-family: 'Noto Sans TC', sans-serif; -webkit-tap-highlight-color: transparent; overscroll-behavior-y: none; }
        .day-card { transition: all 0.3s ease; }
        .hidden-content { display: none; }
        .active-tab { border-bottom: 3px solid #b91c1c; color: #b91c1c; font-weight: 700; background-color: #fef2f2; }
        .scroll-hide::-webkit-scrollbar { display: none; }
        .scroll-hide { -ms-overflow-style: none; scrollbar-width: none; }
        .nav-active { color: #b91c1c; font-weight: bold; }
        .nav-inactive { color: #9ca3af; }
        .pb-safe { padding-bottom: env(safe-area-inset-bottom); }
        /* å¢åŠ  Header é™°å½±å±¤æ¬¡ */
        header { box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06); }
    </style>
</head>
<body class="bg-gray-50 text-gray-800 pb-24 select-none">

    <!-- Header -->
    <header class="fixed top-0 left-0 right-0 bg-white z-50">
        <div class="px-4 py-3 bg-red-800 text-white flex justify-between items-center shadow-sm">
            <div class="flex items-center">
                <div class="mr-3 text-2xl">ğŸ‡¦ğŸ‡¹</div>
                <div>
                    <h1 class="text-lg font-bold tracking-wide">å†¬æ—¥é›™åŸéŠ</h1>
                    <p class="text-xs text-red-200">2025/12/04 - 12/12</p>
                </div>
            </div>
        </div>
        
        <!-- Date Slider -->
        <div class="flex overflow-x-auto whitespace-nowrap bg-white border-b scroll-hide px-2 py-2" id="dateTabs">
            <!-- Tabs will be injected by JS -->
        </div>
    </header>

    <!-- Main Content Container -->
    <!-- å¢åŠ  pt-44 ä»¥é¿å…è¢« Header é®æ“‹ -->
    <main class="container mx-auto px-4 pt-44 max-w-md pb-4 relative min-h-screen">
        
        <!-- Schedule View -->
        <div id="scheduleView" class="animate-fade-in">
            <!-- Schedule cards will be injected by JS -->
        </div>

        <!-- Restaurant View -->
        <div id="restaurantView" class="hidden animate-fade-in">
            <!-- Restaurant list will be injected by JS -->
        </div>

        <!-- Supermarket View -->
        <div id="supermarketView" class="hidden animate-fade-in">
            <!-- Supermarket list will be injected by JS -->
        </div>

    </main>

    <!-- Bottom Navigation -->
    <nav class="fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 flex justify-around items-center py-2 pb-safe z-50 shadow-lg text-xs">
        <button onclick="switchView('schedule')" class="flex flex-col items-center w-1/3 py-2 nav-active" id="nav-schedule">
            <i class="fas fa-calendar-alt text-xl mb-1"></i>
            <span>æ¯æ—¥è¡Œç¨‹</span>
        </button>
        <button onclick="switchView('restaurant')" class="flex flex-col items-center w-1/3 py-2 nav-inactive" id="nav-restaurant">
            <i class="fas fa-utensils text-xl mb-1"></i>
            <span>ç•¶æ—¥ç¾é£Ÿ</span>
        </button>
        <button onclick="switchView('supermarket')" class="flex flex-col items-center w-1/3 py-2 nav-inactive" id="nav-supermarket">
            <i class="fas fa-shopping-basket text-xl mb-1"></i>
            <span>äºæ´²è¶…å¸‚</span>
        </button>
    </nav>

    <!-- Floating Action Button for Map (Only on Schedule) -->
    <a href="https://www.google.com/maps" target="_blank" id="floatMapBtn" class="fixed bottom-20 right-6 bg-red-700 text-white w-12 h-12 rounded-full shadow-xl hover:bg-red-800 transition transform active:scale-95 flex items-center justify-center z-40 opacity-90">
        <i class="fas fa-map-marked-alt text-lg"></i>
    </a>

    <script>
        // ---------------- Data (Synced with Latest Excel & Verified Addresses) ----------------
        const itinerary = [
            {
                date: "12/04", day: "é€±å››", city: "Budapest",
                events: [
                    { time: "æŠµé”", title: "å…¥ä½ & æ”¾è¡Œæ", icon: "fa-suitcase", desc: "æŠµé”å¾Œå…¥ä½é£¯åº—ã€ä¼‘æ¯èª¿æ™‚å·®", note: "é£¯åº—å‡ºé–€å³é”æ•™å ‚" },
                    { time: "æ™šé–“", title: "è–å²è’‚èŠ¬æ•™å ‚å¸‚é›†", icon: "fa-tree", desc: "ä¸‹æ¨“å°±æ˜¯å¸‚é›†ï¼›é€›é€›å–ç†±ç´…é…’", note: "ç¬¬ä¸€å¤©ä¿æŒè¼•é¬†ç¯€å¥" },
                    { time: "æ™šé¤", title: "æ™šé¤ 3 é¸ 1", icon: "fa-utensils", desc: "è©³è¦‹ç¾é£Ÿåˆ†é ï¼šPomo Dâ€™Oro / AszÃº / Zeller", note: "å»ºè­°æŒ‘é¸ä¸€é–“å‰å¾€" }
                ],
                restaurants: [
                    { name: "Pomo Dâ€™Oro", type: "æ™šé¤é¸é …", price: "â‚¬20â€“35", rate: "4.6", desc: "ç¾©å¼æ–™ç†ã€é£¯åº—é™„è¿‘ã€å¥½åƒç©©å®š", addr: "1051 Budapest, Arany JÃ¡nos u. 9" },
                    { name: "AszÃº Ã‰tterem", type: "æ™šé¤é¸é …", price: "â‚¬25â€“45", rate: "4.5", desc: "é«˜ç´šåŒˆç‰™åˆ©æ–™ç†ã€æ°£æ°›å¥½", addr: "1051 Budapest, Sas u. 4" },
                    { name: "Zeller Bistro", type: "æ™šé¤é¸é …", price: "â‚¬20â€“35", rate: "4.6", desc: "äººæ°£é¤å»³ã€æº«é¦¨å°é…’é¤¨ (å·²æ¬æ–°å€)", addr: "1077 Budapest, Izabella u. 36-38" }
                ]
            },
            {
                date: "12/05", day: "é€±äº”", city: "Budapest",
                events: [
                    { time: "09:00", title: "åŸå ¡å±± (å…¬è»Šä¸Šå±±)", icon: "fa-bus", desc: "å¾ Clark ÃdÃ¡m tÃ©r æ­ 16 è™Ÿå…¬è»Šä¸Šå±±", note: "é¿é–‹ 10 é»å¾Œäººæ½®" },
                    { time: "09:30", title: "å¸ƒé”ç‹å®® + çœºæœ›", icon: "fa-camera", desc: "å¤–è§€ã€å»£å ´æ•£æ­¥ã€çœºæœ›å¤šç‘™æ²³å…¨æ™¯", note: "å¦‚é‡é¢¨å¤§å¯ç¸®çŸ­åœç•™" },
                    { time: "10:00", title: "é¦¬åŠ ä»€æ•™å ‚", icon: "fa-church", desc: "æ‹å½©è‰²å±‹é ‚ (å¯é¸è³¼ç¥¨å…¥å…§)", note: "ç¾å ´è²·ç¥¨å³å¯" },
                    { time: "10:30", title: "æ¼äººå ¡", icon: "fa-chess-rook", desc: "ç«¥è©±é¢¨æ ¼è§€æ™¯å°ï¼Œæ‹ç…§æœ€ä½³é»", note: "ä¸€æ¨“å…è²»ï¼ŒäºŒæ¨“éœ€ç¥¨" },
                    { time: "12:00", title: "åˆé¤: åŸå ¡å€ 3 é¸ 1", icon: "fa-utensils", desc: "Baltazar / Ramazuri / Jamieâ€™s", note: "è©³è¦‹ç¾é£Ÿåˆ†é " },
                    { time: "14:00", title: "çºœè»Šä¸‹å±± + é–éˆæ©‹", icon: "fa-tram", desc: "æ­çºœè»Šä¸‹å±±ï¼Œæ­¥è¡Œéé–éˆæ©‹", note: "æ¬£è³å¤šç‘™æ²³æ™¯" },
                    { time: "16:00", title: "å¤šç‘™æ²³ç•”é‹å­", icon: "fa-shoe-prints", desc: "éµé‹ç´€å¿µç¢‘æ‹ç…§", note: "æ²¿æ²³å²¸æ•£æ­¥" },
                    { time: "18:00", title: "æ™šé¤: EssÃªncia", icon: "fa-utensils", desc: "è‘¡è„ç‰™Ã—åŒˆç‰™åˆ©ç±³å…¶æ—é¤å»³", note: "å»ºè­°é ç´„" }
                ],
                restaurants: [
                    { name: "Baltazar Grill", type: "åˆé¤é¸é …", price: "â‚¬20â€“35", rate: "4.4", desc: "åŸå ¡å€æœ€ç©©çš„é¤å»³ã€å¥½è¨‚ä½", addr: "1014 Budapest, OrszÃ¡ghÃ¡z u. 31" },
                    { name: "Ramazuri", type: "åˆé¤é¸é …", price: "â‚¬18â€“30", rate: "4.5", desc: "å‰µæ„æ–™ç†ã€æ°£æ°›è¼•é¬†", addr: "1014 Budapest, Ãšri u. 30" },
                    { name: "Jamieâ€™s Italian", type: "åˆé¤é¸é …", price: "â‚¬18â€“28", rate: "4.2", desc: "ç¾©å¤§åˆ©é€£é–å“ç‰Œã€å£å‘³ç©©", addr: "1014 Budapest, SzenthÃ¡romsÃ¡g u. 9-11" },
                    { name: "EssÃªncia Restaurant", type: "æ™šé¤", price: "â‚¬60â€“90", rate: "4.8", desc: "è‘¡è„ç‰™Ã—åŒˆç‰™åˆ©ç±³å…¶æ—é¤å»³", addr: "1051 Budapest, Sas u. 17" }
                ]
            },
            {
                date: "12/06", day: "é€±å…­", city: "Budapest",
                events: [
                    { time: "09:00", title: "â˜… ä¸­å¤®å¸‚å ´", icon: "fa-shopping-basket", desc: "é€›ç”Ÿé®®ã€è²·éµè‚é†¬ï¼Œåƒ LÃ¡ngos", note: "é€±æ—¥å…¬ä¼‘å¿…æ’ä»Šå¤©" },
                    { time: "10:45", title: "CentrÃ¡l Grand Cafe", icon: "fa-coffee", desc: "ç™¾å¹´æ­·å²å’–å•¡é¤¨ï¼Œè£æ½¢å¾©å¤è¯éº—", note: "å¾å¸‚å ´æ­¥è¡Œç´„ 8 åˆ†é˜" },
                    { time: "11:45", title: "â˜… Nanushka æ——è‰¦åº—", icon: "fa-tshirt", desc: "åŒˆç‰™åˆ©åœ‹å¯¶è¨­è¨ˆå“ç‰Œï¼Œåº—ç¾å¿…é€›", note: "Fashion Street æ—" },
                    { time: "12:30", title: "ç“¦èŒ¨è¡—è³¼ç‰©", icon: "fa-shopping-bag", desc: "å–å®Œå’–å•¡é †è·¯é€› VÃ¡ci utca æ­¥è¡Œè¡—", note: "ä¸€è·¯é€›å¾€å¸‚ä¸­å¿ƒ" },
                    { time: "13:30", title: "åˆé¤ 3 é¸ 1", icon: "fa-utensils", desc: "â‘  Menza â‘¡ Kiosk â‘¢ VakVarjÃº", note: "éƒ½å¯ç¾å ´å€™ä½" },
                    { time: "15:30", title: "è‡ªç”±æ©‹ + è“‹å‹’ç‰¹å±±è…³", icon: "fa-bridge", desc: "èµ°éè‡ªç”±æ©‹ï¼Œå±±è…³æ‹å…¨æ™¯ (ä¸ç”¨çˆ¬å±±)", note: "è¼•é¬†ä¸è²»é«”åŠ›" },
                    { time: "17:00", title: "è–å²è’‚èŠ¬æ•™å ‚å¸‚é›†", icon: "fa-gift", desc: "è²·å°ç‰©ã€çœ‹ 3D ç‡ˆå…‰ç§€", note: "ç´¯äº†å¯é¦¬ä¸Šå›æˆ¿" },
                    { time: "19:00", title: "æ™šé¤ 3 é¸ 1", icon: "fa-utensils", desc: "â‘  Kiskakukk â‘¡ Hungarikum â‘¢ Pomo Dâ€™ Oro", note: "é€±å…­å»ºè­°é ç´„" }
                ],
                restaurants: [
                    { name: "CentrÃ¡l Grand Cafe", type: "æ—©åˆé¤/å’–å•¡", price: "â‚¬10â€“18", rate: "4.3", desc: "æ­·å²å’–å•¡é¤¨ã€æ–‡äººèšé›†åœ°", addr: "1053 Budapest, KÃ¡rolyi u. 9" },
                    { name: "Menza Restaurant", type: "åˆé¤é¸é …", price: "â‚¬15â€“25", rate: "4.4", desc: "å¾©å¤é£Ÿå ‚é¢¨ï¼Œæ¨è–¦è’œé ­æ¹¯ã€é´¨è‚‰ç‡‰é£¯", addr: "1061 Budapest, Liszt Ferenc tÃ©r 2" },
                    { name: "KIOSK Budapest", type: "åˆé¤é¸é …", price: "â‚¬20â€“35", rate: "4.3", desc: "æ°£æ°›å¥½ã€æ™¯è§€ä½³", addr: "1056 Budapest, MÃ¡rcius 15. tÃ©r 4" },
                    { name: "VakVarjÃº Pest", type: "åˆé¤é¸é …", price: "â‚¬15â€“25", rate: "4.4", desc: "å‰µæ„åŒˆç‰™åˆ©èœã€ä»½é‡å¤§", addr: "1061 Budapest, Paulay Ede u. 7" },
                    { name: "Kiskakukk Ã‰tterem", type: "æ™šé¤é¦–é¸", price: "â‚¬20â€“30", rate: "4.5", desc: "éµè…¿è¶…å¼·ã€æœ€å¥½è¨‚ä½", addr: "1137 Budapest, Pozsonyi Ãºt 12" },
                    { name: "Hungarikum BisztrÃ³", type: "æ™šé¤å‚™é¸", price: "â‚¬20â€“30", rate: "4.7", desc: "è¶…ç†±é–€åŒˆç‰™åˆ©å®¶å¸¸èœï¼ˆæ’éšŠï¼‰", addr: "1051 Budapest, Steindl Imre u. 13" },
                    { name: "Pomo Dâ€™Oro", type: "æ™šé¤å‚™é¸", price: "â‚¬20â€“35", rate: "4.6", desc: "ï¼ˆå†æ¬¡åˆ—å…¥ï¼‰é£¯åº—æ—ã€æ–¹ä¾¿", addr: "1051 Budapest, Arany JÃ¡nos u. 9" }
                ]
            },
            {
                date: "12/07", day: "é€±æ—¥", city: "Budapest",
                events: [
                    { time: "09:00", title: "â˜… å¡åˆ‡å°¼æº«æ³‰", icon: "fa-hot-tub", desc: "é«”é©—æˆ¶å¤–å¤§æ± èˆ‡è’¸æ°£å®¤", note: "é€±æ—¥æ—©ä¸Šäººè¼ƒå°‘" },
                    { time: "11:30", title: "è‹±é›„å»£å ´", icon: "fa-monument", desc: "å¾æº«æ³‰æ­¥è¡Œ 3 åˆ†é˜å³é”", note: "æ‹ç…§å¥½åœ°é»" },
                    { time: "12:00", title: "åŸå¸‚å…¬åœ’ City Park", icon: "fa-tree", desc: "æ¹–ç•”æ•£æ­¥ã€æ‹ Vajdahunyad åŸå ¡", note: "é€±æ—¥é©åˆæˆ¶å¤–" },
                    { time: "12:30", title: "åˆé¤ 3 é¸ 1", icon: "fa-utensils", desc: "â‘  Paprika â‘¡ VÃ¡rosliget CafÃ© â‘¢ Gundel", note: "Paprika éœ€æ’éšŠ" },
                    { time: "14:30", title: "å®‰å¾·æ‹‰ä»€å¤§é“", icon: "fa-road", desc: "ä¸–ç•Œéºç”¢å¤§é“ï¼Œæ•£æ­¥çœ‹å»ºç¯‰", note: "é€±æ—¥å•†åº—ä¸é–‹" },
                    { time: "16:00", title: "ææ€–ä¹‹å±‹ / æ­ŒåŠ‡é™¢", icon: "fa-building", desc: "æ‹å¤–è§€æˆ–ä¾é«”åŠ›åƒè§€", note: "ææ€–ä¹‹å±‹é€±æ—¥æœ‰é–‹" },
                    { time: "18:00", title: "â˜… PÃ¡risi Passage", icon: "fa-star", desc: "è¯éº—ç»ç’ƒç©¹é ‚æ™šé¤", note: "å»ºè­°é ç´„" },
                    { time: "20:30", title: "Szimpla Kert", icon: "fa-glass-cheers", desc: "å»¢å¢Ÿé…’å§å–ä¸€æ¯", note: "å¯æ­ Bolt å›é£¯åº—" }
                ],
                restaurants: [
                    { name: "Paprika VendÃ©glÅ‘", type: "åˆé¤ç†±é–€", price: "â‚¬15â€“25", rate: "4.6", desc: "é“åœ°åŒˆç‰™åˆ©èœï¼›æ’éšŠå¾ˆé•·", addr: "1071 Budapest, DÃ³zsa GyÃ¶rgy Ãºt 72" },
                    { name: "VÃ¡rosliget CafÃ©", type: "åˆé¤å‚™é¸", price: "â‚¬20â€“30", rate: "4.4", desc: "æ¹–æ™¯æœ€æ¼‚äº®ã€æ°£æ°›å„ªé›…", addr: "1146 Budapest, Olof Palme sÃ©tÃ¡ny 5" },
                    { name: "Gundel Restaurant", type: "åˆé¤å‚™é¸", price: "â‚¬30â€“50", rate: "4.4", desc: "ç™¾å¹´è€åº—ï¼›å®‰éœèˆ’æœ", addr: "1146 Budapest, Gundel KÃ¡roly Ãºt 4" },
                    { name: "PÃ¡risi Passage CafÃ©", type: "æ™šé¤", price: "â‚¬25â€“40", rate: "4.5", desc: "è¯éº—ç»ç’ƒç©¹é ‚ï¼Œå¿…æ‹", addr: "1053 Budapest, Ferenciek tere 10" },
                    { name: "Szimpla Kert", type: "é…’å§", price: "â‚¬6â€“12", rate: "4.7", desc: "å…¨çƒçŸ¥åå»¢å¢Ÿé…’å§", addr: "1075 Budapest, Kazinczy u. 14" }
                ]
            },
            {
                date: "12/08", day: "é€±ä¸€", city: "Budapest",
                events: [
                    { time: "09:00", title: "çŒ¶å¤ªå€æ·±åº¦éŠ", icon: "fa-synagogue", desc: "DohÃ¡ny è¡—æœƒå ‚ (å¤–è§€/å…¥å…§)", note: "å……æ»¿æ­·å²æ°›åœ" },
                    { time: "10:30", title: "Gozsdu Udvar", icon: "fa-store", desc: "æ–‡å‰µèšè½ï¼Œå……æ»¿å¡—é´‰èˆ‡å°åº—", note: "é©åˆæ‹ç…§" },
                    { time: "æ—©é¤/æ—©åˆé¤", title: "New York CafÃ©", icon: "fa-coffee", desc: "ä¸–ç•Œæœ€ç¾å’–å•¡é¤¨ (éœ€é ç´„)", note: "é«”é©—å®®å»·å¥¢è¯æ„Ÿ" },
                    { time: "15:00", title: "ç“¦èŒ¨è¡—è£œè²¨", icon: "fa-shopping-bag", desc: "æœ€å¾Œä¼´æ‰‹ç¦®æ¡è²·", note: "è¶…å¸‚/è—¥å¦åº—" },
                    { time: "18:30", title: "æ™šé¤ 3 é¸ 1", icon: "fa-utensils", desc: "Mazel Tov / Dobrumba / KÃ©t Szerecsen", note: "ä¸­æ±/åœ°ä¸­æµ·ç‰¹è‰²èœ" }
                ],
                restaurants: [
                    { name: "New York CafÃ©", type: "æ—©é¤/åˆèŒ¶", price: "â‚¬15â€“30", rate: "4.0", desc: "æ’éšŠååº—ï¼›å…§è£æœ€è¯éº—", addr: "1073 Budapest, ErzsÃ©bet krt. 9â€“11" },
                    { name: "Mazel Tov", type: "æ™šé¤é¸é …", price: "â‚¬20â€“30", rate: "4.5", desc: "ä¸­æ±ç¶²ç¾é¤å»³ã€æ°£æ°›å¾ˆå¥½", addr: "1072 Budapest, AkÃ¡cfa u. 47" },
                    { name: "Dobrumba", type: "æ™šé¤é¸é …", price: "â‚¬15â€“25", rate: "4.6", desc: "åœ°ä¸­æµ·å°èœè¶…å¥½åƒ", addr: "1074 Budapest, Dob u. 5" },
                    { name: "KÃ©t Szerecsen", type: "æ™šé¤é¸é …", price: "â‚¬18â€“28", rate: "4.5", desc: "è¼ƒä¸æ’éšŠã€å“è³ªç©©å®š", addr: "1065 Budapest, NagymezÅ‘ u. 14" }
                ]
            },
            {
                date: "12/09", day: "é€±äºŒ", city: "Bp â†’ Vie",
                events: [
                    { time: "æ—©é¤", title: "æ—©é¤ 3 é¸ 1", icon: "fa-coffee", desc: "Strudel House / Central / GerlÃ³czy", note: "åƒé£½å†å‡ºç™¼" },
                    { time: "11:00", title: "æœ€å¾Œæ•£æ­¥", icon: "fa-walking", desc: "æ•™å ‚å‘¨é‚Šæ•£æ­¥ï¼Œå›é£¯åº—æ‹¿è¡Œæ", note: "æª¢æŸ¥è­·ç…§" },
                    { time: "12:00", title: "å‰å¾€ç«è»Šç«™", icon: "fa-taxi", desc: "å‰å¾€ Keleti ç«è»Šç«™ (é ç•™å¡è»Šæ™‚é–“)", note: "å»ºè­°è«‹é£¯åº—å« Bolt" },
                    { time: "13:40", title: "â˜… ç«è»Šå¾€ç¶­ä¹Ÿç´", icon: "fa-train", desc: "Railjet 2.5-3 å°æ™‚", note: "å»ºè­° 13:10 æŠµé”æœˆå°" },
                    { time: "16:20", title: "æŠµé” + Check-in", icon: "fa-hotel", desc: "æŠµé” Wien Hbfï¼Œå…¥ä½é£¯åº—", note: "ä¾é£¯åº—ä½ç½®æ±ºå®šäº¤é€š" },
                    { time: "18:00", title: "å¸‚æ”¿å»³è–èª•å¸‚é›†", icon: "fa-tree", desc: "ç¶­ä¹Ÿç´æœ€å¤§å¸‚é›† + æºœå†°å ´", note: "U1 è½‰ Tram D" },
                    { time: "20:00", title: "Salm BrÃ¤u æ™šé¤", icon: "fa-beer", desc: "ä¿®é“é™¢å•¤é…’é¤¨ï¼Œè±¬è…³å¿…é»", note: "å»ºè­°è¨‚ä½" }
                ],
                restaurants: [
                    { name: "Strudel House", type: "æ—©é¤", price: "â‚¬8â€“15", rate: "4.4", desc: "è˜‹æœæ²å°ˆè³£ã€é›¢æ•™å ‚è¿‘", addr: "1051 Budapest, OktÃ³ber 6. u. 22" },
                    { name: "Central Grand CafÃ©", type: "æ—©é¤", price: "â‚¬10â€“18", rate: "4.3", desc: "æ­·å²å’–å•¡é¤¨ã€å¥½æ‹", addr: "1053 Budapest, KÃ¡rolyi u. 9" },
                    { name: "GerlÃ³czy CafÃ©", type: "æ—©é¤", price: "â‚¬10â€“18", rate: "4.5", desc: "å·´é»é¢¨æ ¼å°é¤é¤¨", addr: "1052 Budapest, GerlÃ³czy u. 1" },
                    { name: "Salm BrÃ¤u", type: "æ™šé¤", price: "â‚¬20â€“30", rate: "4.5", desc: "è±¬è…³ï¼†å•¤é…’å¿…åƒ", addr: "1030 Wien, Rennweg 8" }
                ]
            },
            {
                date: "12/10", day: "é€±ä¸‰", city: "Vienna",
                events: [
                    { time: "09:00", title: "â˜… ç¾æ³‰å®®", icon: "fa-crown", desc: "åƒè§€å®®æ®¿å…§éƒ¨ã€åº­åœ’ã€Gloriette", note: "é ç•™ 3-4 å°æ™‚" },
                    { time: "13:00", title: "ç¾æ³‰å®®å¸‚é›†", icon: "fa-gift", desc: "å¸‚é›†åˆé¤ï¼šéºµåŒ…æ¹¯ã€é¦™è…¸", note: "å®®æ®¿å‰å»£å ´" },
                    { time: "15:00", title: "ç¾æ™¯å®®", icon: "fa-palette", desc: "ä¸Šå®®åƒè§€ Klimtã€Šå»ã€‹", note: "èŠ±åœ’å…è²»" },
                    { time: "19:00", title: "Plachutta æ™šé¤", icon: "fa-utensils", desc: "æ¸…ç‡‰ç‰›è‚‰é‹ (Tafelspitz)", note: "ç¶­ä¹Ÿç´å¿…åƒåœ‹èœ" }
                ],
                restaurants: [
                    { name: "SchÃ¶nbrunn Market", type: "åˆé¤", price: "â‚¬5â€“15", rate: "4.5", desc: "ç¾æ³‰å®®å¸‚é›†æ”¤ä½ï¼Œé¦™è…¸ã€éºµåŒ…æ¹¯", addr: "SchÃ¶nbrunn Palace, Vienna" },
                    { name: "Plachutta Wollzeile", type: "æ™šé¤", price: "â‚¬25â€“40", rate: "4.5", desc: "Tafelspitz æ¸…ç‡‰ç‰›è‚‰ååº—", addr: "1010 Wien, Wollzeile 38" }
                ]
            },
            {
                date: "12/11", day: "é€±å››", city: "Vienna",
                events: [
                    { time: "09:30", title: "è—è¡“å²åšç‰©é¤¨", icon: "fa-university", desc: "ä¸–ç•Œç´šæ”¶è—ï¼Œè¯éº—åœ“é ‚å’–å•¡", note: "é€±å››é–‹åˆ° 21:00" },
                    { time: "13:00", title: "éœå¤«å ¡ + åœ–æ›¸é¤¨", icon: "fa-book", desc: "çœ‹å¤–è§€èˆ‡è‹±é›„å»£å ´", note: "å¸‚ä¸­å¿ƒæ­¥è¡Œ" },
                    { time: "15:30", title: "è€åŸå’–å•¡å·¡ç¦®", icon: "fa-coffee", desc: "CafÃ© Central æˆ– CafÃ© Sacher", note: "éœ€æ’éšŠ" },
                    { time: "19:00", title: "æ™šé¤ 3 é¸ 1", icon: "fa-utensils", desc: "FiglmÃ¼ller / Lugeck / Gasthaus PÃ¶schl", note: "æœ€å¾Œä¸€æ™šå¤§é¤" }
                ],
                restaurants: [
                    { name: "CafÃ© Central", type: "ä¸‹åˆå’–å•¡", price: "â‚¬10â€“15", rate: "4.5", desc: "æœ€ç¶“å…¸ç¶­ä¹Ÿç´å’–å•¡é¤¨", addr: "1010 Wien, Herrengasse 14" },
                    { name: "CafÃ© Sacher", type: "ä¸‹åˆå‚™é¸", price: "â‚¬10â€“15", rate: "4.4", desc: "åŸå‰µ Sacher è›‹ç³•", addr: "1010 Wien, PhilharmonikerstraÃŸe 4" },
                    { name: "FiglmÃ¼ller Wollzeile", type: "æ™šé¤é¸é …", price: "â‚¬20â€“30", rate: "4.3", desc: "å·¨å¤§ç¶­ä¹Ÿç´ç‚¸è±¬æ’ (å»ºè­°é ç´„)", addr: "1010 Wien, Wollzeile 5" },
                    { name: "Lugeck", type: "æ™šé¤é¸é …", price: "â‚¬18â€“28", rate: "4.3", desc: "ç¾ä»£ç‰ˆå¥§åœ°åˆ©èœ", addr: "1010 Wien, Lugeck 4" },
                    { name: "Gasthaus PÃ¶schl", type: "æ™šé¤é¸é …", price: "â‚¬18â€“28", rate: "4.4", desc: "åœ¨åœ°äººæ„›çš„å®¶åº­å°é¤¨", addr: "1010 Wien, Weihburggasse 17" }
                ]
            },
            {
                date: "12/12", day: "é€±äº”", city: "è¿”å®¶",
                events: [
                    { time: "07:40", title: "å‰å¾€æ©Ÿå ´", icon: "fa-plane-departure", desc: "Wien Hbf æ­ç«è»Šè‡³ VIE æ©Ÿå ´", note: "æ­ Railjet / CAT" },
                    { time: "10:40", title: "CI64 é£›å°åŒ—", icon: "fa-plane", desc: "å¹³å®‰å›å®¶", note: "See you next time" }
                ],
                restaurants: [
                    { name: "æ©Ÿå ´é¤é£²", type: "æ—©é¤", price: "N/A", rate: "N/A", desc: "ç¶­ä¹Ÿç´æ©Ÿå ´å…§è¼•é£Ÿæˆ–è²´è³“å®¤", addr: "Vienna International Airport" }
                ]
            }
        ];

        // ---------------- Supermarket Data (Synced with User Request) ----------------
        const asianSupermarkets = [
            // ---------------- Budapest ----------------
            {
                city: "Budapest",
                name: "Ãzsia Bt. (äºæ´²é›œè²¨åº—)",
                tag: "12/06 ä¸­å¤®å¸‚å ´æ—",
                note: "âš ï¸ é€±æ—¥å…¬ä¼‘ï¼Œä¸€å®šè¦ 12/06 å»ï¼",
                addr: "1093 Budapest, VÃ¡mhÃ¡z krt. 5",
                desc: "å¸ƒé”ä½©æ–¯æœ€è€ç‰Œäºæ´²è¶…å¸‚ï¼›å°±åœ¨ä¸­å¤®å¸‚å ´éš”å£ 1 åˆ†é˜ï¼›ä¹¾è²¨ã€é†¬æ–™ã€æ³¡éºµã€äºæ´²é›¶é£Ÿé½Šå…¨ã€‚",
                rate: "4.6"
            },
            {
                city: "Budapest",
                name: "Asian Food Market",
                tag: "ä»»æ„æ—¥ (è¼ƒè¿‘)",
                note: "ä¸­å°å‹åº—ï¼Œé›¢å¸‚ä¸­å¿ƒä¸ç®—é ",
                addr: "1077 Budapest, BÃ©rkocsis u. 16",
                desc: "ä¸­å°å‹äºæ´²é£Ÿå“åº—ï¼›éŸ“åœ‹ã€ä¸­åœ‹ã€æ—¥æœ¬é£Ÿå“ç‚ºä¸»ã€‚",
                rate: "4.4"
            },
            {
                city: "Budapest",
                name: "Wang International Food",
                tag: "ä»»æ„æ—¥ (è¦–è¡Œç¨‹)",
                note: "ä¹¾è²¨ã€èª¿å‘³æ–™ç¨®é¡å¤š",
                addr: "1094 Budapest, ÃœllÅ‘i Ãºt 103",
                desc: "ä¸­å¼ï¼äºæ´²é£Ÿæè£œçµ¦ç«™ï¼›é©åˆå°‹æ‰¾ç‰¹å®šèª¿å‘³æ–™ã€‚",
                rate: "4.3"
            },
            {
                city: "Budapest",
                name: "Thaiâ€‘Vietnam Grocery",
                tag: "æ³¡æº«æ³‰/åŸå¸‚å…¬åœ’æ—¥",
                note: "æ±å—äºé£Ÿå“ç‚ºä¸»",
                addr: "1062 Budapest, TerÃ©z kÃ¶rÃºt 22",
                desc: "æ³°åœ‹ã€è¶Šå—ã€éƒ¨åˆ†ä¸­å¼é£Ÿæï¼›è‹¥å‘¨é‚Šè¡Œç¨‹åœ¨åŸå¸‚å…¬åœ’å¯é †è·¯ã€‚",
                rate: "4.2"
            },
            
            // ---------------- Vienna ----------------
            {
                city: "Vienna",
                name: "Lili Markt (ç™¾åˆè¶…å¸‚)",
                tag: "12/11 é€› Naschmarkt æ™‚",
                note: "å°±åœ¨å¸‚å ´æ—ï¼Œé †ä¾¿å»",
                addr: "1040 Wien, Rechte Wienzeile 29",
                desc: "ç¶­ä¹Ÿç´çŸ¥åäºè¶…ï¼›å°ç£é£²æ–™ï¼ˆåå±‹ã€æ³°å±±ï¼‰ã€ç¾©ç¾å°æ³¡èŠ™ã€å†·å‡æ°´é¤ƒå¸¸è¦‹ã€‚",
                rate: "4.4"
            },
            {
                city: "Vienna",
                name: "Nakwon Supermarket",
                tag: "12/10 æˆ– 12/11",
                note: "æ­é…è³¼ç‰©å€è¡Œç¨‹ï¼Œåº—é¢æ˜äº®",
                addr: "1070 Wien, Zieglergasse 12",
                desc: "ç¶­ä¹Ÿç´æœ€å¤§äºæ´²è¶…å¸‚ä¹‹ä¸€ï¼›æ³¡éºµç¨®é¡çˆ†å¤šï¼›æ˜äº®å¥½é€›ï¼›å°ç£é›¶é£Ÿæ©Ÿç‡é«˜ã€‚",
                rate: "4.6"
            },
            {
                city: "Vienna",
                name: "Asia Food Center (21å€)",
                tag: "æƒ³å¤§é‡è£œè²¨æ™‚ (è¼ƒé )",
                note: "å¤§å‹æ‰¹ç™¼å¼ï¼Œé©åˆé›†ä¸­æ¡è³¼",
                addr: "1210 Wien, Seyringer Str. 8",
                desc: "å¤§å‹åœ‹éš›é£Ÿææ‰¹ç™¼å¼äºæ´²è¶…å¸‚ï¼›ä¹¾è²¨é½Šå…¨ã€‚æ³¨æ„ï¼šä½ç½®è¼ƒåé ã€‚",
                rate: "4.3"
            }
        ];

        let activeDayIndex = 0;
        let supermarketRendered = false; 

        const dateTabs = document.getElementById('dateTabs');
        const scheduleContainer = document.getElementById('scheduleView');
        const restaurantContainer = document.getElementById('restaurantView');
        const supermarketContainer = document.getElementById('supermarketView');
        const navSchedule = document.getElementById('nav-schedule');
        const navRestaurant = document.getElementById('nav-restaurant');
        const navSupermarket = document.getElementById('nav-supermarket');
        const floatMapBtn = document.getElementById('floatMapBtn');

        // ---------------- View Switching Logic ----------------
        function switchView(viewName) {
            // Hide All
            scheduleContainer.classList.add('hidden');
            restaurantContainer.classList.add('hidden');
            supermarketContainer.classList.add('hidden');
            floatMapBtn.classList.add('hidden');
            
            navSchedule.classList.remove('nav-active');
            navSchedule.classList.add('nav-inactive');
            navRestaurant.classList.remove('nav-active');
            navRestaurant.classList.add('nav-inactive');
            navSupermarket.classList.remove('nav-active');
            navSupermarket.classList.add('nav-inactive');

            // Show Selected
            if (viewName === 'schedule') {
                scheduleContainer.classList.remove('hidden');
                floatMapBtn.classList.remove('hidden');
                navSchedule.classList.add('nav-active');
                navSchedule.classList.remove('nav-inactive');
                dateTabs.classList.remove('hidden');
            } else if (viewName === 'restaurant') {
                restaurantContainer.classList.remove('hidden');
                navRestaurant.classList.add('nav-active');
                navRestaurant.classList.remove('nav-inactive');
                dateTabs.classList.remove('hidden');
            } else if (viewName === 'supermarket') {
                supermarketContainer.classList.remove('hidden');
                navSupermarket.classList.add('nav-active');
                navSupermarket.classList.remove('nav-inactive');
                // Hide date tabs for general list view
                dateTabs.classList.add('hidden');
                renderSupermarkets();
            }
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // ---------------- Rendering Logic ----------------
        function renderAll(index) {
            activeDayIndex = index;
            renderTabs();
            renderSchedule(index);
            renderRestaurants(index);
        }

        function renderTabs() {
            dateTabs.innerHTML = '';
            itinerary.forEach((item, index) => {
                const btn = document.createElement('button');
                const isActive = index === activeDayIndex;
                
                btn.className = `px-4 py-2 mx-1 text-sm whitespace-nowrap rounded-t-lg transition-all duration-200 ${
                    isActive 
                    ? 'active-tab' 
                    : 'text-gray-500 hover:text-red-600'
                }`;
                btn.innerHTML = `
                    <div class="font-bold">${item.date}</div>
                    <div class="text-xs">${item.day}</div>
                `;
                btn.onclick = () => {
                    renderAll(index);
                    btn.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'center' });
                    // If in restaurant mode, ensure we stay there but update content
                    if (!restaurantContainer.classList.contains('hidden')) {
                        switchView('restaurant');
                    } else if (!scheduleContainer.classList.contains('hidden')) {
                        switchView('schedule');
                    } else {
                        // If in supermarket mode, clicking tab switches to schedule
                        switchView('schedule');
                    }
                };
                dateTabs.appendChild(btn);
            });
        }

        function renderSchedule(index) {
            const data = itinerary[index];
            scheduleContainer.innerHTML = `
                <div class="mb-4 animate-fade-in">
                    <h2 class="text-2xl font-bold text-gray-800 mb-1 pl-2 border-l-4 border-red-600">${data.city}</h2>
                    <p class="text-sm text-gray-500 pl-3 mb-4">${data.date} (${data.day})</p>
                </div>
            `;

            data.events.forEach(event => {
                const card = document.createElement('div');
                card.className = "bg-white p-4 rounded-xl shadow-sm mb-4 border border-gray-100 day-card";
                
                const isHighlight = event.title.includes('â˜…');
                const titleColor = isHighlight ? 'text-red-700' : 'text-gray-800';
                const bgIcon = isHighlight ? 'bg-red-100 text-red-600' : 'bg-gray-100 text-gray-500';

                card.innerHTML = `
                    <div class="flex items-start">
                        <div class="flex-shrink-0 w-12 text-center mr-3">
                            <span class="block text-sm font-bold text-gray-600">${event.time}</span>
                            <div class="mt-2 w-10 h-10 rounded-full ${bgIcon} flex items-center justify-center mx-auto">
                                <i class="fas ${event.icon}"></i>
                            </div>
                        </div>
                        <div class="flex-grow">
                            <h3 class="font-bold text-lg ${titleColor} leading-tight mb-1">${event.title}</h3>
                            <p class="text-sm text-gray-600 mb-2 leading-relaxed">${event.desc}</p>
                            
                            <div class="bg-yellow-50 p-2 rounded-lg border border-yellow-100 mt-2">
                                <p class="text-xs text-yellow-800 flex items-start">
                                    <i class="fas fa-info-circle mt-0.5 mr-1.5 flex-shrink-0"></i>
                                    <span>${event.note}</span>
                                </p>
                            </div>
                        </div>
                    </div>
                `;
                scheduleContainer.appendChild(card);
            });
            
            // Weather Link
            const searchBtnDiv = document.createElement('div');
            searchBtnDiv.className = "mt-6 mb-10 text-center";
            searchBtnDiv.innerHTML = `
                 <a href="https://www.google.com/search?q=${data.city}+weather+December" target="_blank" class="text-xs text-gray-400 underline">æŸ¥çœ‹ç•¶åœ°å¤©æ°£</a>
            `;
            scheduleContainer.appendChild(searchBtnDiv);
        }

        function renderRestaurants(index) {
            const data = itinerary[index];
            let content = `
                <div class="mb-4">
                    <h2 class="text-2xl font-bold text-gray-800 mb-1 pl-2 border-l-4 border-red-600">
                        ${data.date} ç¾é£Ÿåœ°åœ–
                    </h2>
                    <p class="text-sm text-gray-500 pl-3">ç•¶æ—¥æ¨è–¦é¤å»³ (é»æ“Šå°èˆª)</p>
                </div>
            `;

            if (data.restaurants && data.restaurants.length > 0) {
                data.restaurants.forEach(r => {
                    // Use Search Query for robustness
                    const mapQuery = `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(r.name + ' ' + r.addr)}`;
                    
                    content += `
                        <div class="bg-white p-4 rounded-xl shadow-sm mb-4 border border-gray-100 flex flex-col relative overflow-hidden">
                            <div class="flex justify-between items-start mb-2">
                                <div>
                                    <h3 class="font-bold text-lg text-gray-800 leading-tight">${r.name}</h3>
                                    <div class="text-xs text-gray-500 mt-1 flex items-center">
                                        <span class="bg-red-100 text-red-600 px-2 py-0.5 rounded mr-2">${r.type}</span>
                                        <span class="mr-2"><i class="fas fa-coins text-yellow-500 text-xs"></i> ${r.price}</span>
                                        <span><i class="fas fa-star text-yellow-400 text-xs"></i> ${r.rate}</span>
                                    </div>
                                </div>
                            </div>
                            <p class="text-sm text-gray-600 mb-3 line-clamp-2">${r.desc}</p>
                            
                            <a href="${mapQuery}" target="_blank" class="mt-auto w-full bg-red-600 text-white py-2 rounded-lg text-center font-medium text-sm hover:bg-red-700 transition flex items-center justify-center shadow-md">
                                <i class="fas fa-location-arrow mr-2"></i> å°èˆªå»é€™è£¡
                            </a>
                        </div>
                    `;
                });
            } else {
                content += `
                    <div class="text-center py-10 text-gray-400">
                        <i class="fas fa-utensils text-4xl mb-3"></i>
                        <p>æœ¬æ—¥ç„¡ç‰¹å®šæ¨è–¦é¤å»³<br>å¯åƒè€ƒè¡Œç¨‹ä¸­çš„è‡ªç”±è¦“é£Ÿæ™‚é–“</p>
                    </div>
                `;
            }
            
            content += `<div class="h-8"></div>`;
            restaurantContainer.innerHTML = content;
        }

        function renderSupermarkets() {
            if (supermarketRendered) return;

            // Updated Data based on user feedback
            let content = `
                <div class="mb-4">
                    <h2 class="text-2xl font-bold text-gray-800 mb-1 pl-2 border-l-4 border-red-600">
                        äºæ´²è¶…å¸‚è£œè²¨åœ°åœ–
                    </h2>
                    <p class="text-sm text-gray-500 pl-3">é †è·¯è£œè²¨ã€è§£é„‰æ„å¿…å‚™</p>
                </div>
            `;
            
            let currentCity = "";
            
            asianSupermarkets.forEach(item => {
                // Add city header if city changes
                if (item.city !== currentCity) {
                    currentCity = item.city;
                    let cityFlag = currentCity === "Budapest" ? "ğŸ‡­ğŸ‡º å¸ƒé”ä½©æ–¯" : "ğŸ‡¦ğŸ‡¹ ç¶­ä¹Ÿç´";
                    content += `<h2 class="text-xl font-bold text-gray-800 mb-4 pl-2 border-l-4 border-red-600 mt-6">${cityFlag}</h2>`;
                }

                const mapQuery = `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(item.name + ' ' + item.addr)}`;
                content += `
                    <div class="bg-white p-4 rounded-xl shadow-sm mb-4 border border-gray-100 flex flex-col relative overflow-hidden">
                        <div class="flex justify-between items-start mb-2">
                            <div>
                                <h3 class="font-bold text-lg text-gray-800 leading-tight">${item.name}</h3>
                                <div class="text-xs mt-1 flex flex-wrap gap-2">
                                    <span class="bg-blue-100 text-blue-700 px-2 py-0.5 rounded font-bold">${item.tag}</span>
                                    <span class="text-gray-500 flex items-center"><i class="fas fa-star text-yellow-400 text-xs mr-1"></i> ${item.rate}</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-red-50 p-2 rounded-lg border border-red-100 my-2">
                            <p class="text-xs text-red-700 font-bold flex items-start">
                                <i class="fas fa-exclamation-circle mt-0.5 mr-1.5 flex-shrink-0"></i>
                                <span>${item.note}</span>
                            </p>
                        </div>

                        <p class="text-sm text-gray-600 mb-3 leading-relaxed">${item.desc}</p>
                        
                        <a href="${mapQuery}" target="_blank" class="mt-auto w-full bg-red-600 text-white py-2 rounded-lg text-center font-medium text-sm hover:bg-red-700 transition flex items-center justify-center shadow-md">
                            <i class="fas fa-map-marked-alt mr-2"></i> å°èˆªå»é€™è£¡
                        </a>
                    </div>
                `;
            });

            content += `<div class="h-8"></div>`;
            supermarketContainer.innerHTML = content;
            supermarketRendered = true;
        }

        // Initialize
        renderAll(0);

    </script>
</body>
</html>
